/* === LEAFLET REQUIRED STYLES (fixed for Pip-Boy) === */

/* Core positioning & container */
.leaflet-pane,
.leaflet-tile,
.leaflet-marker-icon,
.leaflet-marker-shadow,
.leaflet-tile-container,
.leaflet-pane > svg,
.leaflet-pane > canvas,
.leaflet-zoom-box,
.leaflet-image-layer,
.leaflet-layer {
  position: absolute;
  left: 0;
  top: 0;
}

.leaflet-container {
  overflow: hidden;
  background: #000; /* Matches Pip-Boy dark theme */
  touch-action: pinch-zoom; /* Allows pinch zoom, disables bad scroll */
}

/* User-select & drag prevention */
.leaflet-tile,
.leaflet-marker-icon,
.leaflet-marker-shadow {
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  -webkit-user-drag: none;
}

/* Retina/quality fixes */
.leaflet-safari .leaflet-tile {
  image-rendering: -webkit-optimize-contrast;
}

/* hack that prevents hw layers "stretching" when loading new tiles */
.leaflet-safari .leaflet-tile-container {
  width: 1600px;
  height: 1600px;
  -webkit-transform-origin: 0 0;
     -moz-transform-origin: 0 0;       /* Firefox compatibility (rarely needed now) */
      -ms-transform-origin: 0 0;       /* Legacy IE/Edge */
          transform-origin: 0 0;       /* Standard property â€“ most important for modern browsers */
}

/* Marker display */
.leaflet-marker-icon,
.leaflet-marker-shadow {
  display: block;
}

/* Prevent max-width breaking tiles/images */
.leaflet-container img.leaflet-tile,
.leaflet-container .leaflet-marker-pane img,
.leaflet-container .leaflet-shadow-pane img,
.leaflet-container .leaflet-tile-pane img,
.leaflet-container img.leaflet-image-layer,
.leaflet-container .leaflet-overlay-pane svg {
  max-width: none !important;
  max-height: none !important;
  width: auto;
  padding: 0;
}

/* Mix-blend-mode fix for Chrome tile issues */
.leaflet-container img.leaflet-tile {
  mix-blend-mode: plus-lighter;
}

/* Touch interaction improvements */
.leaflet-container.leaflet-touch-zoom {
  touch-action: pinch-zoom;
}

.leaflet-container.leaflet-touch-drag {
  touch-action: none;
}

/* Hide default zoom controls (clean Pip-Boy look) */
.leaflet-control-zoom {
  display: none !important;
}

/* Make attribution subtle (bottom right, tiny) */
.leaflet-control-attribution {
  font-size: 9px !important;
  opacity: 0.5;
  background: rgba(0,0,0,0.6);
  padding: 2px 6px;
  border-radius: 3px;
  color: #00ff41 !important;
  pointer-events: none;
}

/* Z-index layering (important for overlays) */
.leaflet-pane { z-index: 400; }
.leaflet-tile-pane { z-index: 200; }
.leaflet-overlay-pane { z-index: 400; }
.leaflet-shadow-pane { z-index: 500; }
.leaflet-marker-pane { z-index: 600; }
.leaflet-tooltip-pane { z-index: 650; }
.leaflet-popup-pane { z-index: 700; }

.leaflet-map-pane canvas { z-index: 100; }
.leaflet-map-pane svg { z-index: 200; }

/* Cursors */
.leaflet-interactive { cursor: pointer; }
.leaflet-grab { cursor: grab; }
.leaflet-dragging .leaflet-grab { cursor: grabbing; }

/* Visual tweaks */
.leaflet-container {
  background: #000; /* Dark base for Pip-Boy */
  font-family: 'VT323', monospace;
  font-size: 12px;
  line-height: 1.4;
}

/* Printing fix */
@media print {
  .leaflet-control {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}