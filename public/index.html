<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ATOMIC FIZZ CAPS • Pip‑Boy 3000</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- PIP-BOY THEME -->
    <link rel="stylesheet" href="/css/pipboy.css" />
    <!-- Leaflet CSS (if not already in your layout) -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
  </head>

  <body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">

  <!-- VAULT / PLAYER HUB -->
  <symbol id="icon-vault" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="7" fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="2" x2="12" y2="5" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="19" x2="12" y2="22" stroke="currentColor" stroke-width="2"/>
    <line x1="2" y1="12" x2="5" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="19" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="5" y1="5" x2="7" y2="7" stroke="currentColor" stroke-width="2"/>
    <line x1="17" y1="17" x2="19" y2="19" stroke="currentColor" stroke-width="2"/>
    <line x1="5" y1="19" x2="7" y2="17" stroke="currentColor" stroke-width="2"/>
    <line x1="17" y1="7" x2="19" y2="5" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- TOWN / SETTLEMENT -->
  <symbol id="icon-town" viewBox="0 0 24 24">
    <path d="M3 12l9-8 9 8v9H3z" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="9" y="14" width="6" height="7" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- CITY / HUB -->
  <symbol id="icon-city" viewBox="0 0 24 24">
    <rect x="3" y="10" width="5" height="10" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="10" y="6" width="4" height="14" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="17" y="12" width="4" height="8" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- QUEST MARKER -->
  <symbol id="icon-quest" viewBox="0 0 24 24">
    <polygon points="12,2 22,12 12,22 2,12" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="12" cy="12" r="3" fill="currentColor"/>
  </symbol>

  <!-- SIDE QUEST -->
  <symbol id="icon-sidequest" viewBox="0 0 24 24">
    <polygon points="12,3 20,12 12,21 4,12" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="12" cy="12" r="2" fill="currentColor"/>
  </symbol>

  <!-- LOOT CACHE -->
  <symbol id="icon-loot" viewBox="0 0 24 24">
    <rect x="3" y="8" width="18" height="10" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="3" y="6" width="18" height="4" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="12" cy="13" r="2" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- TOOLBOX / CRAFTING -->
  <symbol id="icon-toolbox" viewBox="0 0 24 24">
    <rect x="4" y="10" width="16" height="10" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="7" y="6" width="10" height="4" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- RADIATION -->
  <symbol id="icon-rad" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="12" cy="12" r="2" fill="currentColor"/>
    <path d="M12 4v4" stroke="currentColor" stroke-width="2"/>
    <path d="M18 12h-4" stroke="currentColor" stroke-width="2"/>
    <path d="M12 16v4" stroke="currentColor" stroke-width="2"/>
    <path d="M10 8L7 5" stroke="currentColor" stroke-width="2"/>
    <path d="M8 14l-3 3" stroke="currentColor" stroke-width="2"/>
    <path d="M16 14l3 3" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- BOSS / LEGENDARY -->
  <symbol id="icon-boss" viewBox="0 0 24 24">
    <path d="M4 20l3-9-2-5 3-2 2 5 2-5 3 2-2 5 3 9-3 1-1-4-2 4-2-4-1 4z"
          fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- ENEMY CAMP -->
  <symbol id="icon-enemy" viewBox="0 0 24 24">
    <polygon points="3,20 12,4 21,20" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="10" y="12" width="4" height="6" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- CREATURE NEST -->
  <symbol id="icon-nest" viewBox="0 0 24 24">
    <ellipse cx="12" cy="16" rx="8" ry="4" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="8" cy="14" r="1.5" fill="currentColor"/>
    <circle cx="12" cy="14" r="1.5" fill="currentColor"/>
    <circle cx="16" cy="14" r="1.5" fill="currentColor"/>
  </symbol>

  <!-- FACTORY / INDUSTRIAL -->
  <symbol id="icon-factory" viewBox="0 0 24 24">
    <rect x="3" y="11" width="18" height="9" fill="none" stroke="currentColor" stroke-width="2"/>
    <polygon points="3,11 8,7 8,11" fill="none" stroke="currentColor" stroke-width="2"/>
    <polygon points="8,11 13,7 13,11" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- RUINS -->
  <symbol id="icon-ruins" viewBox="0 0 24 24">
    <rect x="4" y="11" width="5" height="9" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="12" y="7" width="8" height="13" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- CAVE -->
  <symbol id="icon-cave" viewBox="0 0 24 24">
    <path d="M4 20l8-14 8 14H4z" fill="none" stroke="currentColor" stroke-width="2"/>
    <rect x="10" y="13" width="4" height="5" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- MOUNTAIN -->
  <symbol id="icon-mountain" viewBox="0 0 24 24">
    <polygon points="2,20 12,4 22,20" fill="none" stroke="currentColor" stroke-width="2"/>
    <polygon points="8,20 12,12 16,20" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- WATER / LAKE -->
  <symbol id="icon-water" viewBox="0 0 24 24">
    <path d="M3 15c3 2 6 2 9 0s6-2 9 0"
          fill="none" stroke="currentColor" stroke-width="2"/>
    <path d="M3 11c3 2 6 2 9 0s6-2 9 0"
          fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- NCR FLAG -->
  <symbol id="icon-ncr" viewBox="0 0 24 24">
    <rect x="4" y="5" width="14" height="10" fill="none" stroke="currentColor" stroke-width="2"/>
    <path d="M7 14l4-5 4 5" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- LEGION -->
  <symbol id="icon-legion" viewBox="0 0 24 24">
    <path d="M4 16l4-8h8l4 8-4 4H8z"
          fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="12" cy="12" r="2" fill="currentColor"/>
  </symbol>

  <!-- BROTHERHOOD OF STEEL -->
  <symbol id="icon-bos" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="7" fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"/>
    <line x1="8" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- ENCLAVE -->
  <symbol id="icon-enclave" viewBox="0 0 24 24">
    <path d="M3 12l9-7 9 7-9 7-9-7z"
          fill="none" stroke="currentColor" stroke-width="2"/>
    <path d="M12 5v14" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- SATELLITE / COMMS -->
  <symbol id="icon-satellite" viewBox="0 0 24 24">
    <rect x="10" y="4" width="4" height="6" fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="10" x2="12" y2="21" stroke="currentColor" stroke-width="2"/>
    <path d="M6 13l6 3 6-3"
          fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

  <!-- STATION / METRO -->
  <symbol id="icon-station" viewBox="0 0 24 24">
    <rect x="4" y="6" width="16" height="10" fill="none" stroke="currentColor" stroke-width="2"/>
    <circle cx="9" cy="13" r="2" fill="currentColor"/>
    <circle cx="15" cy="13" r="2" fill="currentColor"/>
  </symbol>

  <!-- GENERIC POI -->
  <symbol id="icon-poi" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="5" fill="none" stroke="currentColor" stroke-width="2"/>
  </symbol>

</svg>

    <div class="pipboy-root">
      <div class="pipboy-bezel">
        <div class="pipboy-frame">
          <div class="pipboy-crt">
            <!-- CRT overlays -->
            <div class="pipboy-noise"></div>
            <div class="pipboy-scanlines"></div>

            <!-- HEADER -->
            <div class="pipboy-header">
              <div>
                <span class="pipboy-title">PIP‑BOY 3000</span>
                <span class="pipboy-subtitle">ATOMIC FIZZ CAPS</span>
              </div>
              <div class="pipboy-meta">
                <span class="pipboy-meta-item">STATUS: ONLINE</span>
              </div>

              <!-- WALLET HUD (top-right) -->
              <div class="wallet-hud">
                <span id="walletAddress">WALLET: DISCONNECTED</span>
                <button id="connectWalletHUD" class="pipboy-button-small">CONNECT</button>
              </div>
            </div>

            <!-- TABS -->
            <div class="pipboy-tabs">
              <button class="pipboy-tab active" data-pipboy-tab="panel-map">MAP</button>
              <button class="pipboy-tab" data-pipboy-tab="panel-stat">STAT</button>
              <button class="pipboy-tab" data-pipboy-tab="panel-items">ITEMS</button>
              <button class="pipboy-tab" data-pipboy-tab="panel-quests">QUESTS</button>
              <button class="pipboy-tab" data-pipboy-tab="panel-exchange">EXCHANGE</button>
            </div>

            <!-- MAIN FULLSCREEN PANEL SYSTEM -->
            <div class="pipboy-main">

              <!-- MAP PANEL (New Vegas style, full-screen map) -->
              <div id="panel-map" class="pipboy-panel active">
                <div class="panel-header">MAP</div>
                <div class="panel-body">
                  <div id="mapContainer" class="pipboy-map">
                    <div id="radFlash"></div>
                  </div>

                  <!-- Map overlay (bottom text) -->
                  <div class="map-overlay">
                    <div class="map-label">WORLD MAP</div>
                    <div class="map-status" id="mapStatus">SCANNING...</div>
                  </div>

                  <!-- Map controls (top-right) -->
                  <div class="map-controls">
                    <div class="map-style-switcher">
                      <button class="pipboy-button-small map-style-btn" data-style="pipboy_terminal">
                        TERMINAL
                      </button>
                      <button class="pipboy-button-small map-style-btn" data-style="desert_ruins_explorer">
                        DESERT
                      </button>
                      <button class="pipboy-button-small map-style-btn" data-style="winter_recon">
                        WINTER
                      </button>
                    </div>
                  </div>

                  <!-- GPS badge (bottom-right) -->
                  <div class="gps-badge">
                    <div id="accDot" class="acc-dot"></div>
                    <div id="accText">GPS: OFFLINE</div>
                  </div>

                  <!-- GPS request button (bottom-left) -->
                  <button id="request-gps" class="gps-btn pipboy-button-small">
                    REQUEST GPS
                  </button>
                </div>
              </div>

              <!-- STAT PANEL -->
              <div id="panel-stat" class="pipboy-panel">
                <div class="panel-header">STATUS</div>
                <div class="panel-body">

                  <div class="panel-row">
                    <span class="label">NAME</span>
                    <span class="value" id="stat-name">WANDERER</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">LEVEL</span>
                    <span class="value" id="stat-level">1</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">XP</span>
                    <span class="value" id="stat-xp">0 / 100</span>
                  </div>

                  <div class="panel-divider"></div>

                  <div class="panel-row">
                    <span class="label">HEALTH</span>
                    <span class="value" id="stat-hp-label">100 / 100</span>
                  </div>
                  <div class="stat-bar">
                    <div class="stat-bar-fill" id="stat-hp-bar"></div>
                  </div>

                  <div class="panel-row">
                    <span class="label">RADIATION</span>
                    <span class="value" id="stat-rad-label">0%</span>
                  </div>
                  <div class="stat-bar stat-bar-rad">
                    <div class="stat-bar-fill" id="stat-rad-bar"></div>
                  </div>

                  <div class="panel-divider"></div>

                  <div class="panel-row">
                    <span class="label">WALLET</span>
                    <span class="value" id="stat-wallet">DISCONNECTED</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">FIZZ CAPS</span>
                    <span class="value" id="stat-caps">0</span>
                  </div>

                  <div style="margin-top:6px;">
                    <button id="connectWalletStat" class="pipboy-button">CONNECT WALLET</button>
                    <button id="claimMintablesStat" class="pipboy-button pipboy-button-small">
                      CLAIM MINTABLES
                    </button>
                  </div>

                  <div class="panel-divider"></div>

                  <div class="panel-row">
                    <span class="label">WEAPON</span>
                    <span class="value" id="stat-weapon">NONE</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">ARMOR</span>
                    <span class="value" id="stat-armor">NONE</span>
                  </div>

                  <div class="panel-divider"></div>

                  <div class="panel-row">
                    <span class="label">FACTION</span>
                    <span class="value" id="stat-faction">UNALIGNED</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">REPUTATION</span>
                    <span class="value" id="stat-rep">NEUTRAL</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">LOCATION</span>
                    <span class="value" id="stat-location">UNKNOWN</span>
                  </div>
                  <div class="panel-row">
                    <span class="label">WEATHER</span>
                    <span class="value" id="stat-weather">CLEAR</span>
                  </div>

                </div>
              </div>

              <!-- ITEMS PANEL -->
              <div id="panel-items" class="pipboy-panel">
                <div class="panel-header">INVENTORY</div>
                <div class="panel-body" id="inventoryList"></div>
              </div>

              <!-- QUESTS PANEL -->
              <div id="panel-quests" class="pipboy-panel">
                <div class="panel-header">QUEST</div>
                <div class="panel-body" id="questBody"></div>
              </div>

              <!-- EXCHANGE PANEL -->
              <div id="panel-exchange" class="pipboy-panel">
                <div class="panel-header">EXCHANGE</div>
                <div class="panel-body">
                  <div class="exchange-placeholder">
                    <h2>VAULT-TEC EXCHANGE TERMINAL</h2>
                    <p>Awaiting integration...</p>
                  </div>
                </div>
              </div>

            </div>

            <!-- FOOTER -->
            <div class="pipboy-footer">
              <div class="footer-left">VAULT‑TEC INDUSTRIES</div>
              <div class="footer-center">WASTELAND GPS</div>
              <div class="footer-right">REV 77</div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- CORE NAMESPACE -->
    <script>
      if (!window.Game) window.Game = {};
      if (!Game.modules) Game.modules = {};
      Game.hooks = Game.hooks || {};
    </script>

    <!-- MODULES -->
    <script src="/js/modules/economy.js"></script>
    <script src="/js/modules/mintables.js"></script>
    <script src="/js/modules/factions.js"></script>
    <script src="/js/modules/enemyScaling.js"></script>
    <script src="/js/modules/quests.js"></script>
    <script src="/js/modules/worldmap.js"></script>

    <!-- ENGINE -->
    <script src="/js/main.js"></script>

    <!-- LEAFLET JS (if not already included elsewhere) -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <!-- MAP + BOOT -->
    <script src="/js/map/map-core.js"></script>
    <script src="/js/boot.js"></script>

    <!-- STAT PANEL LOGIC -->
    <script src="/js/stat-panel.js"></script>

    <!-- PIP-BOY UI LEGO BLOCKS -->
    <script src="/js/ui/pipboy-tabs.js"></script>
    <script src="/js/ui/inventory-ui.js"></script>
    <script src="/js/ui/quest-ui.js"></script>

  </body>
</html>
