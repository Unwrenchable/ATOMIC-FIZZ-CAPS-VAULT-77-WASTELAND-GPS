<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ATOMIC FIZZ CAPS • WASTELAND GPS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Favicon (optional, keep if you have it) -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Leaflet Map -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- VT323 – Pip-Boy font -->
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />

  <!-- Pip-Boy / CRT styles -->
  <link rel="stylesheet" href="/css/pipboy.css" />
</head>
<body>

  <!-- ==========================
       BOOT SCREEN
       ========================== -->
  <div id="bootScreen">
    <div class="boot-inner">
      <pre id="bootText"></pre>
      <div id="bootPrompt" class="boot-prompt hidden">
        PRESS ANY KEY TO ACTIVATE PIP-BOY INTERFACE ▌
      </div>
    </div>
  </div>

  <!-- ==========================
       PIP-BOY SHELL
       ========================== -->
  <div id="pipboyScreen" class="hidden">
    <div class="pipboy-shell">
      <div class="pipboy-bezel"></div>

      <div class="pipboy-screen crt">

        <!-- OVERSEER TERMINAL LINK -->
        <a href="/overseer.html" class="overseer-link">
          OVERSEER TERMINAL
        </a>

        <!-- HEADER + CONTROLS -->
        <div class="pip-header">
          <div class="pip-title">
            <div class="pip-main-title">ATOMIC FIZZ CAPS</div>
            <div class="pip-sub-title">VAULT 77 • WASTELAND GPS</div>
          </div>
          <div class="pip-controls">
            <button class="btn danger-btn" onclick="window.location='/nuke.html'">
              ENTER NUKE VAULT
            </button>
            <button class="btn" id="centerBtn">Center</button>
            <button class="btn" id="recenterMojave">Mojave</button>
            <button class="btn wallet-btn" id="connectWallet">Connect Wallet</button>
          </div>
        </div>

        <!-- STATUS BAR -->
        <div id="status" class="status status-good">
          Status: ready – tap REQUEST GPS if needed
        </div>

        <!-- HUD BAR -->
        <div class="hud">
          <div class="hud-block">
            LVL <span id="lvl">1</span>
          </div>

          <div class="hud-block hp-block">
            <div class="hp-bar">
              <div id="hpFill" class="hp-fill"></div>
              <div id="radFill" class="rad-fill"></div>
            </div>
            <div id="hpText" class="hp-text">HP 100 / 100</div>
          </div>

          <div class="hud-block">
            CAPS <span id="caps">0</span>
          </div>

          <div class="hud-block xp-wrapper">
            <div class="xp-bar">
              <div id="xpFill" class="xp-fill"></div>
            </div>
            <div class="xp-text" id="xpText">0 / 100</div>
          </div>

          <div class="hud-block">
            CLAIMED <span id="claimed">0</span>
          </div>
        </div>

        <!-- MAP AREA (FULLSCREEN INSIDE PIP-BOY) -->
        <div class="map-container">
          <button class="btn" id="mapModeBtn">MAP MODE</button>
          <div id="map"></div>

          <!-- CRT STATIC -->
          <div class="static-noise"></div>

          <!-- GPS BADGE -->
          <div class="gps-badge">
            <div id="accDot" class="acc-dot"></div>
            <div id="accText">GPS: waiting...</div>
          </div>

          <!-- REQUEST GPS BUTTON -->
          <button class="btn gps-btn" id="requestGpsBtn">
            REQUEST GPS
          </button>
        </div>

        <!-- BOTTOM TABS -->
        <div class="tabs">
          <div class="tab active" data-panel="map">MAP</div>
          <div class="tab" data-panel="stat">STAT</div>
          <div class="tab" data-panel="items">ITEMS</div>
          <div class="tab" data-panel="quests">QUESTS</div>
          <div class="tab" data-panel="shop">SCAVENGER'S EXCHANGE</div>
        </div>

        <!-- TERMINAL PANEL -->
        <div id="terminal" class="terminal hidden">
          <div class="terminal-inner">
            <button class="btn terminal-close" id="panelClose">X</button>
            <h4 id="panelTitle">TERMINAL</h4>
            <div id="panelBody" class="terminal-body">
              Select a tab to begin...
            </div>
          </div>
        </div>

        <!-- LOOT MODAL -->
        <div id="mintModal" class="modal hidden">
          <div class="modal-inner">
            <div id="mintTitle" class="modal-title">LOOT FOUND</div>
            <div id="mintMsg" class="modal-text">Claiming CAPS...</div>
            <div class="modal-progress">
              <div id="mintProgressBar" class="modal-progress-fill"></div>
            </div>
            <button class="btn" id="mintCloseBtn">Close</button>
          </div>
        </div>

        <!-- TUTORIAL MODAL -->
        <div id="tutorialModal" class="modal hidden">
          <div class="modal-inner">
            <div class="modal-title">WELCOME TO THE WASTELAND</div>
            <div class="modal-text">
              <p>→ Connect Phantom wallet</p>
              <p>→ Allow GPS</p>
              <p>→ Hunt markers – get within 50m to claim</p>
              <p>→ Survive the Atomic Fizz.</p>
            </div>
            <button class="btn" id="tutorialClose">ENTER WASTELAND</button>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- ==========================
       SCRIPTS
       ========================== -->

  <!-- Leaflet -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- Solana + bs58 (keep for wallet/backend integration) -->
  <script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.min.js"></script>
  <script src="https://unpkg.com/bs58@6.0.0/dist/index.min.js"></script>

  <!-- Metaplex / Irys (if your backend uses them; safe to keep) -->
  <script src="https://cdn.jsdelivr.net/npm/@metaplex-foundation/mpl-core@1.1.0/dist/browser/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@metaplex-foundation/umi@1.4.1/dist/umd/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@metaplex-foundation/umi-bundle-defaults@1.4.1/dist/umd/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@irys/sdk@0.2.11/dist/browser/index.umd.js"></script>

  <!-- BOOT FIRST (emits event when ready) -->
  <script src="/js/boot.js"></script>

  <!-- MAP CORE SECOND (creates Leaflet map + tiles) -->
  <script src="/js/map-core.js"></script>

  <!-- GAME LAST (GPS, VATS, quests, etc., uses existing map) -->
  <script src="/js/main.js"></script>

</body>
</html>
